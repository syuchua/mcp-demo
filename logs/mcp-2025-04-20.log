2025-04-20 11:10:26.413 | INFO     | src.clients.mcp_client:118 - 正在连接到服务器 'weather'
2025-04-20 11:10:26.414 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:10:26.969 | ERROR    | src.clients.cli:76 - 错误：Tool.__init__() got an unexpected keyword argument 'inputSchema'
2025-04-20 11:10:26.971 | INFO     | src.clients.mcp_client:274 - 正在关闭服务器连接...
2025-04-20 11:10:26.971 | INFO     | src.clients.mcp_client:279 - 正在关闭 HTTP 客户端...
2025-04-20 11:10:26.972 | INFO     | src.clients.mcp_client:284 - 正在清理资源...
2025-04-20 11:17:01.183 | INFO     | src.clients.mcp_client:118 - 正在连接到服务器 'weather'
2025-04-20 11:17:01.184 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:17:01.721 | INFO     | src.clients.mcp_client:126 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:17:01.721 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:17:01.722 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:17:01.722 | INFO     | src.clients.cli:23 - API 端点：https://api.openai.com/v1
2025-04-20 11:17:01.722 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:18:01.408 | INFO     | src.clients.mcp_client:274 - 正在关闭服务器连接...
2025-04-20 11:18:01.409 | INFO     | src.clients.mcp_client:279 - 正在关闭 HTTP 客户端...
2025-04-20 11:18:01.409 | INFO     | src.clients.mcp_client:284 - 正在清理资源...
2025-04-20 11:18:01.411 | INFO     | src.clients.mcp_client:279 - 正在关闭 HTTP 客户端...
2025-04-20 11:18:01.411 | INFO     | src.clients.mcp_client:284 - 正在清理资源...
2025-04-20 11:18:07.157 | INFO     | src.clients.mcp_client:118 - 正在连接到服务器 'weather'
2025-04-20 11:18:07.158 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:18:07.692 | INFO     | src.clients.mcp_client:126 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:18:07.692 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:18:07.692 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:18:07.692 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 11:18:07.692 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:28:23.321 | INFO     | src.clients.mcp_client:274 - 正在关闭服务器连接...
2025-04-20 11:28:23.321 | INFO     | src.clients.mcp_client:279 - 正在关闭 HTTP 客户端...
2025-04-20 11:28:23.322 | INFO     | src.clients.mcp_client:284 - 正在清理资源...
2025-04-20 11:28:23.324 | INFO     | src.clients.mcp_client:279 - 正在关闭 HTTP 客户端...
2025-04-20 11:28:23.324 | INFO     | src.clients.mcp_client:284 - 正在清理资源...
2025-04-20 11:28:28.934 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 11:28:28.935 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 'weather'
2025-04-20 11:28:28.935 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:28:29.454 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:28:29.454 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:28:29.454 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:28:29.454 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 11:28:29.454 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:28:40.394 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 11:28:40.394 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询北京天气'
2025-04-20 11:28:40.984 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:28:40.990 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:28:45.996 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: 
2025-04-20 11:28:45.997 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 11:28:45.997 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 11:28:45.998 | ERROR    | src.clients.mcp_client:220 - LLM API 调用失败: 
2025-04-20 11:29:36.113 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 11:29:36.113 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询北京天气'
2025-04-20 11:29:36.700 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:29:36.705 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:29:39.025 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:29:39.026 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['高德.weather']
2025-04-20 11:29:39.026 | INFO     | src.clients.mcp_client:244 - 正在调用工具: 高德.weather, 参数: {'location': '北京'}
2025-04-20 11:29:39.035 | INFO     | src.clients.mcp_client:249 - 工具调用成功: 高德.weather
2025-04-20 11:29:39.035 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:29:39.773 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 11:29:39.774 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 11:29:39.774 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 11:29:39.775 | ERROR    | src.clients.mcp_client:284 - 最终 LLM API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 11:30:03.188 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 11:30:03.188 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询北京天气'
2025-04-20 11:30:03.794 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:30:03.799 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:30:05.650 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:30:05.650 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['高德.get_weather']
2025-04-20 11:30:05.651 | INFO     | src.clients.mcp_client:244 - 正在调用工具: 高德.get_weather, 参数: {'city': '北京'}
2025-04-20 11:30:05.658 | INFO     | src.clients.mcp_client:249 - 工具调用成功: 高德.get_weather
2025-04-20 11:30:05.658 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:30:06.423 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 11:30:06.424 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 11:30:06.424 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 11:30:06.425 | ERROR    | src.clients.mcp_client:284 - 最终 LLM API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 11:30:41.731 | INFO     | src.clients.mcp_client:303 - 正在关闭服务器连接...
2025-04-20 11:30:41.731 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:30:41.732 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:30:41.734 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:30:41.734 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:30:48.213 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 11:30:48.213 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 'weather'
2025-04-20 11:30:48.215 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:30:48.744 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:30:48.744 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:30:48.744 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:30:48.744 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 11:30:48.744 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:31:03.713 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 11:31:03.713 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询北京天气'
2025-04-20 11:31:04.304 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:31:04.310 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:31:11.986 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:31:11.986 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_forecast']
2025-04-20 11:31:11.986 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_forecast, 参数: {'latitude': 39.9042, 'longitude': 116.4074}
2025-04-20 11:31:13.181 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_forecast
2025-04-20 11:31:13.182 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:31:14.233 | INFO     | src.clients.mcp_client:282 - 最终 LLM API 调用成功
2025-04-20 11:31:14.234 | INFO     | src.clients.mcp_client:292 - 查询处理完成，返回结果
2025-04-20 11:31:28.711 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 11:31:28.712 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询北京天气'
2025-04-20 11:31:29.295 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:31:29.300 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:31:47.503 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:31:47.504 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_forecast']
2025-04-20 11:31:47.504 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_forecast, 参数: {'latitude': 39.9042, 'longitude': 116.4074}
2025-04-20 11:31:48.702 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_forecast
2025-04-20 11:31:48.703 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:31:50.093 | INFO     | src.clients.mcp_client:282 - 最终 LLM API 调用成功
2025-04-20 11:31:50.094 | INFO     | src.clients.mcp_client:292 - 查询处理完成，返回结果
2025-04-20 11:33:20.559 | INFO     | src.clients.cli:48 - 用户输入: '使用高德查询北京天气'
2025-04-20 11:33:20.559 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '使用高德查询北京天气'
2025-04-20 11:33:21.213 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:33:21.217 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:33:37.124 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:33:37.125 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_forecast']
2025-04-20 11:33:37.126 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_forecast, 参数: {'latitude': 39.9042, 'longitude': 116.4074}
2025-04-20 11:33:42.726 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_forecast
2025-04-20 11:33:42.727 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:33:48.585 | INFO     | src.clients.mcp_client:282 - 最终 LLM API 调用成功
2025-04-20 11:33:48.586 | INFO     | src.clients.mcp_client:292 - 查询处理完成，返回结果
2025-04-20 11:34:28.635 | INFO     | src.clients.commands:73 - 正在断开与服务器 'weather' 的连接...
2025-04-20 11:34:28.637 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 '高德'
2025-04-20 11:34:28.638 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=YOUR_API_KEY'
2025-04-20 11:34:30.407 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 11:34:30.407 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 11:34:39.473 | INFO     | src.clients.cli:48 - 用户输入: '使用高德查询北京天气'
2025-04-20 11:34:39.474 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '使用高德查询北京天气'
2025-04-20 11:34:40.072 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:34:40.072 | INFO     | src.clients.mcp_client:190 - 根据查询内容自动切换到服务器: weather
2025-04-20 11:34:40.073 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 'weather'
2025-04-20 11:34:40.073 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:34:40.598 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:34:40.601 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:34:43.497 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:34:43.498 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_weather']
2025-04-20 11:34:43.499 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_weather, 参数: {'location': '北京'}
2025-04-20 11:34:43.504 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_weather
2025-04-20 11:34:43.504 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:34:44.624 | INFO     | src.clients.mcp_client:282 - 最终 LLM API 调用成功
2025-04-20 11:34:44.625 | INFO     | src.clients.mcp_client:292 - 查询处理完成，返回结果
2025-04-20 11:35:51.911 | INFO     | src.clients.cli:48 - 用户输入: '查询洛杉矶天气'
2025-04-20 11:35:51.912 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询洛杉矶天气'
2025-04-20 11:35:52.511 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:35:52.517 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:35:58.772 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:35:58.773 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_forecast']
2025-04-20 11:35:58.774 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_forecast, 参数: {'latitude': 34.052235, 'longitude': -118.243683}
2025-04-20 11:36:04.409 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_forecast
2025-04-20 11:36:04.410 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:36:18.632 | INFO     | src.clients.mcp_client:282 - 最终 LLM API 调用成功
2025-04-20 11:36:18.633 | INFO     | src.clients.mcp_client:292 - 查询处理完成，返回结果
2025-04-20 11:43:17.506 | INFO     | src.clients.mcp_client:303 - 正在关闭服务器连接...
2025-04-20 11:43:17.506 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:43:17.506 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:43:17.510 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:43:17.510 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:43:23.410 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 11:43:23.411 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 'weather'
2025-04-20 11:43:23.411 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:43:24.068 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:43:24.069 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:43:24.069 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:43:24.069 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 11:43:24.069 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:46:05.021 | INFO     | src.clients.mcp_client:303 - 正在关闭服务器连接...
2025-04-20 11:46:05.021 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:46:05.021 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:46:05.023 | INFO     | src.clients.mcp_client:308 - 正在关闭 HTTP 客户端...
2025-04-20 11:46:05.023 | INFO     | src.clients.mcp_client:313 - 正在清理资源...
2025-04-20 11:47:13.245 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 11:47:13.246 | INFO     | src.clients.mcp_client:121 - 正在连接到服务器 'weather'
2025-04-20 11:47:13.246 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 11:47:13.827 | INFO     | src.clients.mcp_client:129 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 11:47:13.827 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 11:47:13.827 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 11:47:13.827 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 11:47:13.827 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 11:47:23.209 | INFO     | src.clients.cli:48 - 用户输入: '查询洛杉矶天气'
2025-04-20 11:47:23.210 | INFO     | src.clients.mcp_client:170 - 正在处理查询: '查询洛杉矶天气'
2025-04-20 11:47:23.815 | INFO     | src.clients.mcp_client:179 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 11:47:23.819 | INFO     | src.clients.mcp_client:210 - 开始调用 LLM API: gpt-4o
2025-04-20 11:47:25.782 | INFO     | src.clients.mcp_client:218 - LLM API 调用成功
2025-04-20 11:47:25.783 | INFO     | src.clients.mcp_client:234 - LLM 请求调用工具: ['get_forecast']
2025-04-20 11:47:25.783 | INFO     | src.clients.mcp_client:244 - 正在调用工具: get_forecast, 参数: {'latitude': 34.052235, 'longitude': -118.243683}
2025-04-20 11:47:27.191 | INFO     | src.clients.mcp_client:249 - 工具调用成功: get_forecast
2025-04-20 11:47:27.192 | INFO     | src.clients.mcp_client:275 - 正在获取 LLM 最终响应...
2025-04-20 11:47:28.385 | INFO     | src.clients.mcp_client:283 - 最终 LLM API 调用成功
2025-04-20 11:47:28.385 | INFO     | src.clients.mcp_client:293 - 查询处理完成，返回结果
2025-04-20 12:03:58.776 | INFO     | src.clients.mcp_client:304 - 正在关闭服务器连接...
2025-04-20 12:03:58.777 | INFO     | src.clients.mcp_client:309 - 正在关闭 HTTP 客户端...
2025-04-20 12:03:58.777 | INFO     | src.clients.mcp_client:314 - 正在清理资源...
2025-04-20 12:03:58.779 | INFO     | src.clients.mcp_client:309 - 正在关闭 HTTP 客户端...
2025-04-20 12:03:58.779 | INFO     | src.clients.mcp_client:314 - 正在清理资源...
2025-04-20 12:04:03.602 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 12:04:03.603 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 12:04:03.603 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 12:04:04.117 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 12:04:04.118 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 12:04:04.118 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 12:04:04.118 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 12:04:04.118 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 12:04:19.270 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 12:04:19.270 | INFO     | src.clients.mcp_client:146 - 正在处理查询: '查询北京天气'
2025-04-20 12:04:19.271 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:04:19.872 | INFO     | src.clients.mcp_client:154 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:04:19.873 | INFO     | src.clients.mcp_client:167 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:04:27.276 | INFO     | src.clients.mcp_client:188 - 没有明确服务器选择，使用默认服务器: weather
2025-04-20 12:04:27.284 | INFO     | src.clients.mcp_client:219 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 12:04:28.556 | INFO     | src.clients.mcp_client:237 - LLM 请求调用工具: ['get_forecast']
2025-04-20 12:04:28.556 | INFO     | src.clients.mcp_client:247 - 正在调用工具: get_forecast, 参数: {'latitude': 39.9042, 'longitude': 116.4074}
2025-04-20 12:04:29.922 | INFO     | src.clients.mcp_client:252 - 工具调用成功: get_forecast
2025-04-20 12:04:29.922 | INFO     | src.clients.mcp_client:276 - 正在获取 LLM 最终响应...
2025-04-20 12:04:41.958 | INFO     | src.clients.mcp_client:283 - 最终 LLM API 调用成功
2025-04-20 12:04:41.959 | INFO     | src.clients.mcp_client:291 - 查询处理完成，返回结果
2025-04-20 12:04:49.868 | INFO     | src.clients.cli:48 - 用户输入: '查询洛杉矶天气'
2025-04-20 12:04:49.868 | INFO     | src.clients.mcp_client:146 - 正在处理查询: '查询洛杉矶天气'
2025-04-20 12:04:49.868 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:04:50.475 | INFO     | src.clients.mcp_client:154 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:04:50.475 | INFO     | src.clients.mcp_client:167 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:04:52.135 | INFO     | src.clients.mcp_client:188 - 没有明确服务器选择，使用默认服务器: weather
2025-04-20 12:04:52.139 | INFO     | src.clients.mcp_client:219 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 12:04:53.144 | INFO     | src.clients.mcp_client:237 - LLM 请求调用工具: ['get_forecast']
2025-04-20 12:04:53.144 | INFO     | src.clients.mcp_client:247 - 正在调用工具: get_forecast, 参数: {'latitude': 34.0522, 'longitude': -118.2437}
2025-04-20 12:04:55.507 | INFO     | src.clients.mcp_client:252 - 工具调用成功: get_forecast
2025-04-20 12:04:55.507 | INFO     | src.clients.mcp_client:276 - 正在获取 LLM 最终响应...
2025-04-20 12:04:59.512 | INFO     | src.clients.mcp_client:283 - 最终 LLM API 调用成功
2025-04-20 12:04:59.513 | INFO     | src.clients.mcp_client:291 - 查询处理完成，返回结果
2025-04-20 12:06:24.965 | INFO     | src.clients.mcp_client:302 - 正在关闭服务器连接...
2025-04-20 12:06:24.965 | INFO     | src.clients.mcp_client:307 - 正在关闭 HTTP 客户端...
2025-04-20 12:06:24.966 | INFO     | src.clients.mcp_client:312 - 正在清理资源...
2025-04-20 12:06:24.968 | INFO     | src.clients.mcp_client:307 - 正在关闭 HTTP 客户端...
2025-04-20 12:06:24.968 | INFO     | src.clients.mcp_client:312 - 正在清理资源...
2025-04-20 12:06:37.433 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 12:06:37.434 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 12:06:37.434 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 12:06:37.989 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 12:06:37.990 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 12:06:37.990 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 12:06:37.990 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 12:06:37.990 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 12:06:50.345 | INFO     | src.clients.cli:48 - 用户输入: '使用高德查询北京天气'
2025-04-20 12:06:50.345 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '使用高德查询北京天气'
2025-04-20 12:06:50.345 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:06:50.937 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:06:50.938 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:06:56.671 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 12:06:56.671 | INFO     | src.clients.mcp_client:205 - 切换到服务器: 高德
2025-04-20 12:06:56.672 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 12:06:56.672 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 12:06:57.810 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 12:06:57.810 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 12:06:57.810 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 12:06:58.912 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['maps_weather']
2025-04-20 12:06:58.913 | INFO     | src.clients.mcp_client:255 - 正在调用工具: maps_weather, 参数: {'city': '北京'}
2025-04-20 12:06:59.015 | INFO     | src.clients.mcp_client:260 - 工具调用成功: maps_weather
2025-04-20 12:06:59.016 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 12:07:03.426 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 12:07:03.427 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 12:07:43.883 | INFO     | src.clients.cli:48 - 用户输入: '帮我规划从平西府到天安门广场的路线'
2025-04-20 12:07:43.883 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我规划从平西府到天安门广场的路线'
2025-04-20 12:07:43.883 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:07:44.473 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:07:44.474 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:08:01.516 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 12:08:01.517 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 12:08:01.517 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 12:08:01.518 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 12:08:40.773 | INFO     | src.clients.cli:48 - 用户输入: '使用高德帮我规划从平西府到天安门广场的路线'
2025-04-20 12:08:40.774 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '使用高德帮我规划从平西府到天安门广场的路线'
2025-04-20 12:08:40.774 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:08:41.368 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:08:41.368 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:08:43.698 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: 高德
2025-04-20 12:08:43.700 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 12:08:44.928 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['maps_geo']
2025-04-20 12:08:44.929 | INFO     | src.clients.mcp_client:255 - 正在调用工具: maps_geo, 参数: {'address': '平西府', 'city': '北京'}
2025-04-20 12:08:45.206 | INFO     | src.clients.mcp_client:260 - 工具调用成功: maps_geo
2025-04-20 12:08:45.207 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 12:09:08.844 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 12:09:08.845 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 12:09:30.476 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 12:09:30.476 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 12:09:30.477 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 12:09:30.480 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 12:09:30.481 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 12:10:45.398 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 12:10:45.399 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 12:10:45.399 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 12:10:45.925 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 12:10:45.925 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 12:10:45.925 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 12:10:45.926 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 12:10:45.926 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 12:12:00.366 | INFO     | src.clients.cli:48 - 用户输入: '查询纽约和洛杉矶明天天气，只需包含基础的三到五项天气指标，结果用json数组返回'
2025-04-20 12:12:00.367 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询纽约和洛杉矶明天天气，只需包含基础的三到五项天气指标，结果用json数组返回'
2025-04-20 12:12:00.367 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 12:12:00.952 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 12:12:00.953 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 12:12:23.174 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: weather
2025-04-20 12:12:23.179 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 12:12:24.885 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['get_forecast', 'get_forecast']
2025-04-20 12:12:24.886 | INFO     | src.clients.mcp_client:255 - 正在调用工具: get_forecast, 参数: {'latitude': 40.7128, 'longitude': -74.006}
2025-04-20 12:12:27.914 | INFO     | src.clients.mcp_client:260 - 工具调用成功: get_forecast
2025-04-20 12:12:27.915 | INFO     | src.clients.mcp_client:255 - 正在调用工具: get_forecast, 参数: {'latitude': 34.0522, 'longitude': -118.2437}
2025-04-20 12:12:35.272 | INFO     | src.clients.mcp_client:260 - 工具调用成功: get_forecast
2025-04-20 12:12:35.273 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 12:12:37.866 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 12:12:37.866 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 12:44:21.878 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 12:44:21.879 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 12:44:21.879 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 12:44:21.881 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 12:44:21.881 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:16:28.342 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:16:28.343 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:16:28.344 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:16:28.874 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:16:28.874 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:16:28.874 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 13:16:28.874 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:16:28.874 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:17:07.453 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:17:07.453 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:17:07.454 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:17:08.058 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:17:08.058 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:17:10.120 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything-server
2025-04-20 13:17:10.120 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything-server
2025-04-20 13:17:10.121 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything-server'
2025-04-20 13:17:10.121 | INFO     | src.connectors.command:42 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:17:10.184 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: 'AsyncExitStack' object has no attribute 'push_callback'
2025-04-20 13:31:06.405 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:31:06.406 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:31:06.406 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:31:06.408 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:31:06.408 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:31:12.200 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:31:12.201 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:31:12.201 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:31:12.762 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:31:12.762 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:31:12.762 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 13:31:12.762 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:31:12.762 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:31:32.756 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的QQ.exe路径'
2025-04-20 13:31:32.757 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的QQ.exe路径'
2025-04-20 13:31:32.757 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:31:33.366 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:31:33.366 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:31:38.245 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything-server
2025-04-20 13:31:38.246 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything-server
2025-04-20 13:31:38.247 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything-server'
2025-04-20 13:31:38.247 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:31:39.923 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything-server'，可用工具：['search']
2025-04-20 13:31:39.925 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything-server' 的工具
2025-04-20 13:31:53.051 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:31:53.051 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:31:53.051 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:31:53.052 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:32:40.103 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:32:40.103 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:32:40.104 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:32:40.710 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:32:40.711 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:32:42.731 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything-server
2025-04-20 13:32:42.735 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything-server' 的工具
2025-04-20 13:32:43.369 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:32:43.369 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:32:43.369 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:32:43.370 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:33:30.103 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uvx.exe路径'
2025-04-20 13:33:30.104 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uvx.exe路径'
2025-04-20 13:33:30.104 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:33:30.705 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:33:30.706 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:33:34.876 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:33:34.877 | INFO     | src.clients.mcp_client:201 - 指定的服务器无效，使用: everything-server
2025-04-20 13:33:34.882 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything-server' 的工具
2025-04-20 13:33:35.488 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:33:35.489 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:33:35.489 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:33:35.490 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:34:24.732 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uvx.exe路径'
2025-04-20 13:34:24.732 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uvx.exe路径'
2025-04-20 13:34:24.733 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:34:25.330 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:34:25.331 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:34:27.000 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: everything-server
2025-04-20 13:34:27.006 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything-server' 的工具
2025-04-20 13:34:49.342 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:34:49.342 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:34:49.343 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:34:49.344 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:35:27.657 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:35:27.657 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:35:27.657 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:35:28.262 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:35:28.263 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:35:33.439 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: everything-server
2025-04-20 13:35:33.446 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything-server' 的工具
2025-04-20 13:35:34.193 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:35:34.194 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:35:34.194 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:35:34.195 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:36:02.124 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:36:02.124 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:36:02.124 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:36:04.140 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:36:04.140 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:36:15.532 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:36:15.533 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:36:15.533 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:36:16.059 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:36:16.060 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:36:16.060 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 13:36:16.060 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:36:16.060 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:36:22.204 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:36:22.204 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:36:22.204 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:36:22.803 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:36:22.804 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:36:40.290 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:36:40.291 | INFO     | src.clients.mcp_client:201 - 指定的服务器无效，使用: weather
2025-04-20 13:36:40.294 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 13:36:41.240 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['everything-server.search']
2025-04-20 13:36:41.241 | INFO     | src.clients.mcp_client:255 - 正在调用工具: everything-server.search, 参数: {'query': 'QQ.exe'}
2025-04-20 13:36:41.245 | INFO     | src.clients.mcp_client:260 - 工具调用成功: everything-server.search
2025-04-20 13:36:41.245 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 13:36:42.540 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 13:36:42.541 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 13:36:57.668 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:36:57.668 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:36:57.668 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:36:58.268 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:36:58.269 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:37:01.170 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:37:01.170 | INFO     | src.clients.mcp_client:201 - 指定的服务器无效，使用: weather
2025-04-20 13:37:01.174 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 13:37:02.116 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['everything-server.search_files']
2025-04-20 13:37:02.116 | INFO     | src.clients.mcp_client:255 - 正在调用工具: everything-server.search_files, 参数: {'query': 'QQ.exe'}
2025-04-20 13:37:02.124 | INFO     | src.clients.mcp_client:260 - 工具调用成功: everything-server.search_files
2025-04-20 13:37:02.125 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 13:37:02.997 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 13:37:02.998 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 13:38:28.465 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:38:28.465 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:38:28.465 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:38:28.468 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:38:28.468 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:38:33.792 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:38:33.793 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:38:33.793 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:38:34.320 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:38:34.320 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:38:34.321 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 13:38:34.321 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:38:34.321 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:38:45.515 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:38:45.516 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:38:45.516 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:38:46.115 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:38:46.116 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:38:48.078 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:38:48.079 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 13:38:48.079 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 13:38:48.079 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:38:48.714 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 13:38:48.716 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:38:49.310 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:38:49.310 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:38:49.310 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:38:49.311 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:39:09.108 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:39:09.108 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:39:09.108 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:39:09.715 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:39:09.715 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:39:23.933 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:39:23.938 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:39:24.602 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:39:24.602 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:39:24.602 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:39:24.603 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:39:33.078 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:39:33.079 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:39:33.079 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:39:35.095 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:39:35.095 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:39:52.128 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:39:52.129 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:39:52.129 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:39:52.681 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:39:52.682 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:39:52.682 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 13:39:52.682 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:39:52.682 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:39:55.922 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:39:55.922 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:39:55.922 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:39:56.514 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:39:56.515 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:40:01.863 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:40:01.863 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 13:40:01.863 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 13:40:01.863 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:40:02.475 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 13:40:02.478 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:40:03.094 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:40:03.094 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:40:03.096 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:40:03.096 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:40:21.172 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:40:21.173 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:40:21.173 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:40:21.850 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:40:21.851 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:40:26.862 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:40:26.865 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:40:44.731 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:40:44.731 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:40:44.731 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:40:44.731 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:41:18.705 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:41:18.705 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:41:18.705 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:41:20.715 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:41:20.716 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:41:25.842 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:41:25.843 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:41:25.843 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:41:26.387 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:41:26.387 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:41:26.387 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 13:41:26.387 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:41:26.387 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:41:28.883 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:41:28.884 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:41:28.884 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 13:41:29.492 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 13:41:29.493 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:41:31.287 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1/models/2.0-flash:generateContent?key=sk-CdHIE9KpjBk2QO86D7B6E8A3E22b4eB2BaB07544E7Fb80A2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:45:39.826 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:45:39.826 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:45:39.827 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:45:39.829 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:45:39.829 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:45:45.880 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:45:45.881 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:45:45.882 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:45:46.483 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:45:46.483 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:45:46.484 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 13:45:46.484 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:45:46.484 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:45:49.687 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:45:49.688 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:45:49.688 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 13:45:50.294 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 13:45:50.295 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:45:51.170 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '404 Not Found' for url 'https://generativelanguage.googleapis.com/v1/models/2.0-flash:generateContent?key=AIzaSyDtGP9TbgSv6rneJeMt1UHpmOF8i-mzo1A'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-20 13:46:38.079 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:46:38.080 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:46:38.080 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:46:38.082 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:46:38.082 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:46:42.504 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:46:42.506 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:46:42.506 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:46:43.038 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:46:43.039 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:46:43.039 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o
2025-04-20 13:46:43.039 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:46:43.039 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:46:45.461 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:46:45.461 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:46:45.461 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:46:46.066 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:46:46.067 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:46:48.135 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:46:48.135 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 13:46:48.136 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 13:46:48.136 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:46:50.213 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 13:46:50.216 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:46:50.900 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:46:50.901 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:46:50.901 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:46:50.902 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:47:23.872 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:47:23.872 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:47:23.872 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:47:24.473 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:47:24.473 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:47:26.484 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:47:26.491 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:47:27.552 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:47:27.553 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:47:27.553 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:47:27.553 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:49:21.203 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:49:21.203 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:49:21.203 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:49:21.810 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:49:21.810 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:49:24.062 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:49:24.065 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:50:24.071 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: 
2025-04-20 13:50:24.072 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:50:24.073 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:50:24.074 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: 
2025-04-20 13:51:09.171 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 13:51:09.172 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 13:51:09.172 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:51:09.795 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o
2025-04-20 13:51:09.795 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:51:11.656 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:51:11.659 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:51:12.408 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:51:12.409 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:51:12.409 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:51:12.410 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:55:17.369 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 13:55:17.369 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:55:17.369 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:55:19.379 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 13:55:19.379 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 13:55:24.803 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 13:55:24.804 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 13:55:24.804 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 13:55:25.330 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 13:55:25.331 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 13:55:25.331 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 13:55:25.331 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 13:55:25.331 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 13:55:44.038 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:55:44.038 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 13:55:44.038 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:55:44.630 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:55:44.630 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:55:47.408 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:55:47.409 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 13:55:47.409 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 13:55:47.410 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 13:55:48.008 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 13:55:48.012 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:56:11.297 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:56:11.297 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:56:11.297 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:56:11.298 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:56:50.526 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上uv.exe所在位置'
2025-04-20 13:56:50.527 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上uv.exe所在位置'
2025-04-20 13:56:50.527 | INFO     | src.clients.mcp_client:88 - 使用 OpenAI API: https://api.yuchu.me/v1
2025-04-20 13:56:51.130 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 13:56:51.131 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 13:56:53.400 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 13:56:53.406 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 13:56:53.961 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 13:56:53.962 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 13:56:53.963 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 13:56:53.964 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:01:16.749 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 14:01:16.749 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:01:16.749 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:01:18.769 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:01:18.770 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:01:40.941 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 14:01:40.942 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:01:40.942 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:01:41.527 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:01:41.527 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 14:01:41.527 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 14:01:41.528 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 14:01:41.528 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 14:01:44.478 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 14:01:44.478 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 14:01:44.478 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 14:01:45.084 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:01:45.085 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:01:46.350 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 14:01:46.351 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 14:01:46.351 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 14:01:46.352 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 14:01:48.549 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 14:01:48.551 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 14:01:48.862 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDtGP9TbgSv6rneJeMt1UHpmOF8i-mzo1A'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:03:10.439 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 14:03:10.439 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 14:03:10.439 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 14:03:11.662 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:03:11.663 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:03:12.982 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 14:03:12.987 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 14:03:13.358 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDtGP9TbgSv6rneJeMt1UHpmOF8i-mzo1A'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:04:05.331 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 14:04:05.332 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 14:04:05.332 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 14:04:05.934 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:04:05.935 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:04:06.915 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 14:04:06.916 | INFO     | src.clients.mcp_client:205 - 切换到服务器: 高德
2025-04-20 14:04:06.917 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 14:04:06.917 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 14:04:08.017 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 14:04:08.017 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 14:04:08.018 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:04:08.307 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDtGP9TbgSv6rneJeMt1UHpmOF8i-mzo1A'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:04:26.965 | INFO     | src.clients.cli:48 - 用户输入: '你可以做什么'
2025-04-20 14:04:26.965 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '你可以做什么'
2025-04-20 14:04:26.965 | INFO     | src.clients.mcp_client:86 - 使用 Google API: None
2025-04-20 14:04:27.578 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:04:27.579 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:04:29.029 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: 高德
2025-04-20 14:04:29.029 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:04:29.315 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDtGP9TbgSv6rneJeMt1UHpmOF8i-mzo1A'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:07:45.055 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 14:07:45.055 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:07:45.056 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:07:47.070 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:07:47.070 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:07:51.425 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 14:07:51.426 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:07:51.426 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:07:51.955 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:07:51.955 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 14:07:51.955 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 14:07:51.955 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 14:07:51.956 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 14:07:54.400 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上uv.exe所在位置'
2025-04-20 14:07:54.401 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上uv.exe所在位置'
2025-04-20 14:07:55.017 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:07:55.018 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:07:56.040 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '404 Not Found' for url 'https://api.yuchu.me/v1/models/gemini-2.0-flash:generateContent?key=sk-CdHIE9KpjBk2QO86D7B6E8A3E22b4eB2BaB07544E7Fb80A2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-20 14:08:30.924 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 14:08:30.924 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:08:30.924 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:08:30.926 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:08:30.926 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:08:36.765 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 14:08:36.766 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:08:36.766 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:08:37.306 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:08:37.306 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 14:08:37.306 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 14:08:37.306 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 14:08:37.306 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 14:08:41.817 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 14:08:41.817 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 14:08:42.416 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:08:42.417 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:08:43.385 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '404 Not Found' for url 'https://api.yuchu.me/v1/models/gemini-2.0-flash:generateContent?key=sk-CdHIE9KpjBk2QO86D7B6E8A3E22b4eB2BaB07544E7Fb80A2'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-04-20 14:11:29.785 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 14:11:29.786 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:11:29.786 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:11:29.788 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:11:29.788 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:11:34.704 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 14:11:34.705 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:11:34.705 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:11:35.244 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:11:35.245 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 14:11:35.245 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 14:11:35.245 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 14:11:35.245 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 14:11:37.093 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 14:11:37.093 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 14:11:37.691 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:11:37.691 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:11:39.452 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 14:11:39.452 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 14:11:39.452 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 14:11:39.452 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 14:11:40.084 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 14:11:40.086 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 14:11:40.434 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:11:40.435 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:11:40.435 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:11:40.435 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:12:57.210 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 14:12:57.210 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 14:12:57.810 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:12:57.811 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:12:59.395 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 14:12:59.396 | INFO     | src.clients.mcp_client:205 - 切换到服务器: 高德
2025-04-20 14:12:59.396 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 14:12:59.396 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 14:13:00.585 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 14:13:00.585 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 14:13:00.586 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:13:00.902 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:13:00.902 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:13:00.902 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:13:00.902 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:13:25.098 | INFO     | src.clients.cli:48 - 用户输入: '查询纽约天气'
2025-04-20 14:13:25.098 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询纽约天气'
2025-04-20 14:13:25.701 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:13:25.702 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:13:27.207 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: weather
2025-04-20 14:13:27.207 | INFO     | src.clients.mcp_client:205 - 切换到服务器: weather
2025-04-20 14:13:27.207 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:13:27.208 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:13:27.817 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:13:27.820 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 14:13:28.654 | INFO     | src.clients.mcp_client:239 - 获取到初始回复内容
2025-04-20 14:13:28.654 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 14:14:13.206 | INFO     | src.clients.cli:48 - 用户输入: '查询纽约天气'
2025-04-20 14:14:13.207 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询纽约天气'
2025-04-20 14:14:13.823 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:14:13.823 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:14:16.396 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: weather
2025-04-20 14:14:16.403 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 14:14:17.312 | INFO     | src.clients.mcp_client:239 - 获取到初始回复内容
2025-04-20 14:14:17.313 | INFO     | src.clients.mcp_client:245 - LLM 请求调用工具: ['get_forecast']
2025-04-20 14:14:17.313 | INFO     | src.clients.mcp_client:255 - 正在调用工具: get_forecast, 参数: {'latitude': 40.7128, 'longitude': -74.006}
2025-04-20 14:14:19.733 | INFO     | src.clients.mcp_client:260 - 工具调用成功: get_forecast
2025-04-20 14:14:19.733 | INFO     | src.clients.mcp_client:284 - 正在获取 LLM 最终响应...
2025-04-20 14:14:21.434 | INFO     | src.clients.mcp_client:291 - 最终 LLM API 调用成功
2025-04-20 14:14:21.434 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 14:14:29.274 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 14:14:29.274 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 14:14:29.879 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:14:29.880 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:14:31.068 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 14:14:31.068 | INFO     | src.clients.mcp_client:205 - 切换到服务器: 高德
2025-04-20 14:14:31.069 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 14:14:31.069 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 14:14:32.118 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 14:14:32.119 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 14:14:32.119 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:14:35.068 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:14:35.068 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:14:35.069 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:14:35.070 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:15:36.326 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 14:15:36.327 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 14:15:36.934 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:15:36.934 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:15:38.287 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 14:15:38.287 | INFO     | src.clients.mcp_client:205 - 切换到服务器: everything
2025-04-20 14:15:38.287 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 14:15:38.288 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 14:15:40.300 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 14:15:40.302 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 14:15:40.627 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:15:40.628 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:15:40.628 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:15:40.628 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:24:46.499 | INFO     | src.clients.cli:48 - 用户输入: '你好'
2025-04-20 14:24:46.500 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '你好'
2025-04-20 14:24:47.109 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:24:47.109 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:24:49.706 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: everything
2025-04-20 14:24:49.716 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 14:24:50.209 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:24:50.209 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:24:50.210 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:24:50.210 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:25:02.993 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 14:25:02.994 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:25:02.994 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:25:07.022 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 14:25:07.022 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 14:25:11.599 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 14:25:11.600 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 14:25:11.600 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 14:25:12.118 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 14:25:12.119 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 14:25:12.119 | INFO     | src.clients.cli:22 - 使用模型：gemini-2.0-flash
2025-04-20 14:25:12.119 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 14:25:12.119 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 14:25:16.334 | INFO     | src.clients.cli:48 - 用户输入: '测试'
2025-04-20 14:25:16.334 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '测试'
2025-04-20 14:25:16.938 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:25:16.938 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:25:19.503 | INFO     | src.clients.mcp_client:196 - 没有明确服务器选择，使用默认服务器: weather
2025-04-20 14:25:19.511 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 14:25:20.170 | INFO     | src.clients.mcp_client:239 - 获取到初始回复内容
2025-04-20 14:25:20.170 | INFO     | src.clients.mcp_client:299 - 查询处理完成，返回结果
2025-04-20 14:25:32.276 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 14:25:32.276 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 14:25:32.887 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:25:32.887 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:25:36.143 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 14:25:36.143 | INFO     | src.clients.mcp_client:205 - 切换到服务器: 高德
2025-04-20 14:25:36.144 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 14:25:36.144 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 14:25:37.295 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 14:25:37.296 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 14:25:37.296 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:25:37.630 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:25:37.630 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:25:37.630 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:25:37.632 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:28:32.718 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 14:28:32.718 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 14:28:33.386 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 14:28:33.386 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 14:28:34.901 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 14:28:34.901 | INFO     | src.clients.mcp_client:227 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 14:28:35.247 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 14:28:35.248 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 14:28:35.248 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 14:28:35.249 | ERROR    | src.clients.mcp_client:302 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 15:18:53.406 | INFO     | src.clients.mcp_client:310 - 正在关闭服务器连接...
2025-04-20 15:18:53.406 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 15:18:53.407 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 15:18:53.415 | INFO     | src.clients.mcp_client:315 - 正在关闭 HTTP 客户端...
2025-04-20 15:18:53.415 | INFO     | src.clients.mcp_client:320 - 正在清理资源...
2025-04-20 15:19:01.061 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 15:19:01.062 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 15:19:01.063 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 15:19:01.605 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 15:19:01.606 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 15:19:01.606 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 15:19:01.606 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 15:19:01.606 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 15:20:25.848 | INFO     | src.clients.cli:48 - 用户输入: '你好'
2025-04-20 15:20:25.849 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '你好'
2025-04-20 15:20:26.473 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 15:20:26.473 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 15:20:28.050 | INFO     | src.clients.mcp_client:197 - 指定的服务器无效，使用: weather
2025-04-20 15:20:28.054 | ERROR    | src.clients.mcp_client:298 - 处理查询时出现未捕获的错误: 'Tool' object has no attribute 'input_schema'
2025-04-20 15:22:20.796 | INFO     | src.clients.mcp_client:306 - 正在关闭服务器连接...
2025-04-20 15:22:20.796 | INFO     | src.clients.mcp_client:311 - 正在关闭 HTTP 客户端...
2025-04-20 15:22:20.796 | INFO     | src.clients.mcp_client:316 - 正在清理资源...
2025-04-20 15:22:20.798 | INFO     | src.clients.mcp_client:311 - 正在关闭 HTTP 客户端...
2025-04-20 15:22:20.799 | INFO     | src.clients.mcp_client:316 - 正在清理资源...
2025-04-20 15:22:25.905 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 15:22:25.905 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'weather'
2025-04-20 15:22:25.906 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 15:22:26.450 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 15:22:26.450 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 15:22:26.450 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 15:22:26.450 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 15:22:26.450 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 15:22:31.732 | INFO     | src.clients.cli:48 - 用户输入: 'hello'
2025-04-20 15:22:31.732 | INFO     | src.clients.mcp_client:154 - 正在处理查询: 'hello'
2025-04-20 15:22:32.341 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 15:22:32.342 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 15:22:35.922 | INFO     | src.clients.mcp_client:197 - 指定的服务器无效，使用: weather
2025-04-20 15:22:35.926 | INFO     | src.clients.mcp_client:223 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 15:22:36.707 | INFO     | src.clients.mcp_client:235 - 获取到初始回复内容
2025-04-20 15:22:36.707 | INFO     | src.clients.mcp_client:295 - 查询处理完成，返回结果
2025-04-20 15:22:48.866 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 15:22:48.867 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询北京天气'
2025-04-20 15:22:49.466 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 15:22:49.466 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 15:22:51.076 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: 高德
2025-04-20 15:22:51.076 | INFO     | src.clients.mcp_client:201 - 切换到服务器: 高德
2025-04-20 15:22:51.077 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 '高德'
2025-04-20 15:22:51.077 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 15:22:52.301 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 15:22:52.302 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 15:22:52.302 | INFO     | src.clients.mcp_client:223 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 15:22:53.624 | INFO     | src.clients.mcp_client:241 - LLM 请求调用工具: ['maps_weather']
2025-04-20 15:22:53.625 | INFO     | src.clients.mcp_client:251 - 正在调用工具: maps_weather, 参数: {'city': '北京'}
2025-04-20 15:22:53.757 | INFO     | src.clients.mcp_client:256 - 工具调用成功: maps_weather
2025-04-20 15:22:53.757 | INFO     | src.clients.mcp_client:280 - 正在获取 LLM 最终响应...
2025-04-20 15:22:56.761 | INFO     | src.clients.mcp_client:287 - 最终 LLM API 调用成功
2025-04-20 15:22:56.761 | INFO     | src.clients.mcp_client:295 - 查询处理完成，返回结果
2025-04-20 15:23:02.880 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 15:23:02.881 | INFO     | src.clients.mcp_client:154 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 15:23:03.500 | INFO     | src.clients.mcp_client:162 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 15:23:03.501 | INFO     | src.clients.mcp_client:175 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 15:23:05.434 | INFO     | src.clients.mcp_client:192 - LLM 选择使用服务器: everything
2025-04-20 15:23:05.435 | INFO     | src.clients.mcp_client:201 - 切换到服务器: everything
2025-04-20 15:23:05.435 | INFO     | src.clients.mcp_client:122 - 正在连接到服务器 'everything'
2025-04-20 15:23:05.435 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 15:23:07.575 | INFO     | src.clients.mcp_client:130 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 15:23:07.577 | INFO     | src.clients.mcp_client:223 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 15:23:08.327 | ERROR    | src.llm.openai:51 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 15:23:08.328 | ERROR    | src.llm.openai:52 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 15:23:08.329 | ERROR    | src.llm.openai:53 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'content-type': 'application/json', 'authorization': '[secure]'})
2025-04-20 15:23:08.329 | ERROR    | src.clients.mcp_client:298 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 15:49:20.791 | INFO     | src.clients.mcp_client:306 - 正在关闭服务器连接...
2025-04-20 15:49:20.791 | INFO     | src.clients.mcp_client:311 - 正在关闭 HTTP 客户端...
2025-04-20 15:49:20.791 | INFO     | src.clients.mcp_client:316 - 正在清理资源...
2025-04-20 15:49:22.805 | INFO     | src.clients.mcp_client:311 - 正在关闭 HTTP 客户端...
2025-04-20 15:49:22.805 | INFO     | src.clients.mcp_client:316 - 正在清理资源...
2025-04-20 16:06:29.753 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 16:06:29.754 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 16:06:29.754 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 16:06:30.302 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 16:06:30.303 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 16:06:30.303 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 16:06:30.303 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 16:06:30.303 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 16:06:41.600 | INFO     | src.clients.cli:48 - 用户输入: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 16:06:41.600 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '帮我查找电脑上QQ.exe所在位置'
2025-04-20 16:06:41.600 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 16:06:41.600 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 16:06:43.181 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 16:06:43.182 | INFO     | src.llm.openai:35 - 示例模型: Cohere-embed-v3-multilingual, DeepSeek-V3, Deepseek-R1, Llama-3.3-70B-Instruct, Meta-Llama-3.1-405B-Instruct
2025-04-20 16:06:43.182 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 16:06:43.182 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 16:06:43.182 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 16:06:44.305 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 16:06:44.306 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 16:06:44.306 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 16:06:44.306 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 16:06:46.475 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 16:06:46.478 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: 'Tool' object has no attribute 'input_schema'
2025-04-20 16:07:59.586 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 16:07:59.586 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:07:59.586 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:08:01.594 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:08:01.594 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:08:06.097 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 16:08:06.098 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 16:08:06.098 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 16:08:06.626 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 16:08:06.626 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 16:08:06.626 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 16:08:06.626 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 16:08:06.626 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 16:08:11.254 | INFO     | src.clients.cli:48 - 用户输入: '查询电脑上的uv.exe路径'
2025-04-20 16:08:11.255 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查询电脑上的uv.exe路径'
2025-04-20 16:08:11.255 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 16:08:11.255 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 16:08:12.926 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 16:08:12.926 | INFO     | src.llm.openai:35 - 示例模型: Cohere-embed-v3-multilingual, DeepSeek-V3, Deepseek-R1, Llama-3.3-70B-Instruct, Meta-Llama-3.1-405B-Instruct
2025-04-20 16:08:12.927 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 16:08:12.928 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 16:08:12.928 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 16:08:13.771 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 16:08:13.772 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 16:08:13.772 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 16:08:13.773 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 16:08:14.405 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 16:08:14.408 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 16:08:15.019 | ERROR    | src.llm.openai:73 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 16:08:15.020 | ERROR    | src.llm.openai:74 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 16:08:15.020 | ERROR    | src.llm.openai:75 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 16:08:15.020 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 16:12:53.266 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 16:12:53.266 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:12:53.267 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:12:55.278 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:12:55.279 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:17:04.209 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 16:17:04.209 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 16:17:04.210 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 16:17:04.768 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 16:17:04.768 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 16:17:04.768 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 16:17:04.768 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 16:17:04.769 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 16:17:14.878 | INFO     | src.clients.cli:48 - 用户输入: '查找QQ.exe'
2025-04-20 16:17:14.878 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查找QQ.exe'
2025-04-20 16:17:14.879 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 16:17:14.879 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 16:17:16.390 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 16:17:16.390 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 16:17:16.390 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 16:17:16.391 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 16:17:17.601 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 16:17:17.601 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 16:17:17.601 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 16:17:17.602 | INFO     | src.connectors.command:35 - 正在工作目录 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\.' 中启动命令 'uvx'
2025-04-20 16:17:19.630 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 16:17:19.633 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 16:17:20.107 | ERROR    | src.llm.openai:73 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 16:17:20.107 | ERROR    | src.llm.openai:74 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 16:17:20.107 | ERROR    | src.llm.openai:75 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 16:17:20.107 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 16:41:17.150 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 16:41:17.150 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:41:17.151 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:41:19.160 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:41:19.160 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:41:24.672 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 16:41:24.673 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 16:41:24.673 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 16:41:25.198 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 16:41:25.199 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 16:41:25.199 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 16:41:25.199 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 16:41:25.199 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 16:41:37.743 | INFO     | src.clients.cli:48 - 用户输入: '查询QQ.exe'
2025-04-20 16:41:37.743 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查询QQ.exe'
2025-04-20 16:41:37.743 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 16:41:37.743 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 16:41:39.913 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 16:41:39.914 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 16:41:39.914 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 16:41:39.914 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 16:41:41.179 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 16:41:41.179 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 16:41:41.179 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 16:41:41.179 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\everything_search.py'
2025-04-20 16:45:34.097 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 16:45:34.097 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:45:34.098 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 16:45:34.102 | ERROR    | src.clients.mcp_client:333 - 清理资源时出错: unhandled errors in a TaskGroup (1 sub-exception)
2025-04-20 16:45:39.551 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 16:45:39.554 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 16:45:39.555 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 16:45:40.093 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 16:45:40.093 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 16:45:40.093 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 16:45:40.094 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 16:45:40.094 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 16:45:43.376 | INFO     | src.clients.cli:48 - 用户输入: '查找QQ.exe'
2025-04-20 16:45:43.376 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查找QQ.exe'
2025-04-20 16:45:43.376 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 16:45:43.376 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 16:45:45.088 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 16:45:45.088 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 16:45:45.089 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 16:45:45.089 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 16:45:46.137 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 16:45:46.138 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 16:45:46.138 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 16:45:46.138 | INFO     | src.connectors.stdio:48 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\everything_search.py'
2025-04-20 16:45:46.712 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search', 'search_direct', 'get_file_content']
2025-04-20 16:45:46.715 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 16:45:47.969 | INFO     | src.clients.mcp_client:254 - LLM 请求调用工具: ['search']
2025-04-20 16:45:47.969 | INFO     | src.clients.mcp_client:264 - 正在调用工具: search, 参数: {'query': 'QQ.exe', 'include_files': True, 'include_folders': False}
2025-04-20 16:55:11.794 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 16:55:11.795 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 16:55:11.795 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:01:50.507 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 17:01:50.508 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 17:01:50.509 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 17:01:51.079 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 17:01:51.079 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 17:01:51.079 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 17:01:51.079 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 17:01:51.079 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 17:01:56.390 | INFO     | src.clients.cli:48 - 用户输入: '查询QQ.exe'
2025-04-20 17:01:56.391 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查询QQ.exe'
2025-04-20 17:01:56.391 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:01:56.391 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:01:58.107 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:01:58.108 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:01:58.108 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:01:58.108 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:01:59.467 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 17:01:59.467 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 17:01:59.468 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 17:01:59.468 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 17:02:01.389 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 17:02:01.391 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:02:01.954 | ERROR    | src.llm.openai:73 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:02:01.954 | ERROR    | src.llm.openai:74 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 17:02:01.955 | ERROR    | src.llm.openai:75 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 17:02:01.955 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:14:24.650 | INFO     | src.clients.cli:48 - 用户输入: '查询QQ.exe'
2025-04-20 17:14:24.650 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查询QQ.exe'
2025-04-20 17:14:24.650 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:14:24.651 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:14:26.295 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:14:26.296 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:14:26.296 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:14:26.297 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:14:31.334 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 17:14:31.340 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:14:32.209 | ERROR    | src.llm.openai:73 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:14:32.210 | ERROR    | src.llm.openai:74 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 17:14:32.210 | ERROR    | src.llm.openai:75 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 17:14:32.210 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:36:40.663 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 17:36:40.664 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:36:40.664 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:36:42.686 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:36:42.687 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:36:47.666 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 17:36:47.666 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 17:36:47.667 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 17:36:48.195 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 17:36:48.195 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 17:36:48.195 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 17:36:48.195 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 17:36:48.195 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 17:36:50.050 | INFO     | src.clients.cli:48 - 用户输入: '查找QQ.exe'
2025-04-20 17:36:50.051 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查找QQ.exe'
2025-04-20 17:36:50.051 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:36:50.051 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:36:52.715 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:36:52.716 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:36:52.716 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:36:52.716 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:36:53.794 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 17:36:53.795 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 17:36:53.795 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 17:36:53.795 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 17:36:56.425 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 17:36:56.428 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:36:56.975 | ERROR    | src.llm.openai:114 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:36:56.975 | ERROR    | src.llm.openai:115 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 17:36:56.976 | ERROR    | src.llm.openai:116 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 17:36:56.976 | ERROR    | src.llm.openai:122 - 错误响应原文: {"error":{"message":"Invalid 'tools[0].function.description': string too long. Expected a string with maximum length 1024, but got a string with length 3504 instead. (request id: 20250420173656986575531Chg5Gwhr)","type":"invalid_request_error","param":"tools[0].function.description","code":"string_above_max_length"}}
2025-04-20 17:36:56.976 | ERROR    | src.llm.openai:125 - 错误详情: {
  "error": {
    "message": "Invalid 'tools[0].function.description': string too long. Expected a string with maximum length 1024, but got a string with length 3504 instead. (request id: 20250420173656986575531Chg5Gwhr)",
    "type": "invalid_request_error",
    "param": "tools[0].function.description",
    "code": "string_above_max_length"
  }
}
2025-04-20 17:36:56.977 | ERROR    | src.llm.openai:134 - 工具 1 定义: {"type": "function", "function": {"name": "search", "description": "Universal file search tool for Windows\n\nCurrent Implementation:\nUsing Everything SDK with full search capabilities\n\nSearch Syntax Guide:\nSearch for files and folders using Everything SDK.\n                \nFeatures:\n- Fast file and folder search across all indexed drives\n- Support for wildcards and boolean operators\n- Multiple sort options (name, path, size, dates)\n- Case-sensitive and whole word matching\n- Regular expression support\n- Path matching\nSearch Syntax Guide:\n1. Basic Operators:\n   - space: AND operator\n   - |: OR operator\n   - !: NOT operator\n   - < >: Grouping\n   - \" \": Search for an exact phrase\n2. Wildcards:\n   - *: Matches zero or more characters\n   - ?: Matches exactly one character\n   Note: Wildcards match the whole filename by default. Disable Match whole filename to match wildcards anywhere.\n3. Functions:\n   Size and Count:\n   - size:<size>[kb|mb|gb]: Search by file size\n   - count:<max>: Limit number of results\n   - childcount:<count>: Folders with specific number of children\n   - childfilecount:<count>: Folders with specific number of files\n   - childfoldercount:<count>: Folders with specific number of subfolders\n   - len:<length>: Match filename length\n   Dates:\n   - datemodified:<date>, dm:<date>: Modified date\n   - dateaccessed:<date>, da:<date>: Access date\n   - datecreated:<date>, dc:<date>: Creation date\n   - daterun:<date>, dr:<date>: Last run date\n   - recentchange:<date>, rc:<date>: Recently changed date\n   \n   Date formats: YYYY[-MM[-DD[Thh[:mm[:ss[.sss]]]]]] or today, yesterday, lastweek, etc.\n   \n   File Attributes and Types:\n   - attrib:<attributes>, attributes:<attributes>: Search by file attributes (A:Archive, H:Hidden, S:System, etc.)\n   - type:<type>: Search by file type\n   - ext:<list>: Search by semicolon-separated extensions\n   \n   Path and Name:\n   - path:<path>: Search in specific path\n   - parent:<path>, infolder:<path>, nosubfolders:<path>: Search in path excluding subfolders\n   - startwith:<text>: Files starting with text\n   - endwith:<text>: Files ending with text\n   - child:<filename>: Folders containing specific child\n   - depth:<count>, parents:<count>: Files at specific folder depth\n   - root: Files with no parent folder\n   - shell:<name>: Search in known shell folders\n   Duplicates and Lists:\n   - dupe, namepartdupe, attribdupe, dadupe, dcdupe, dmdupe, sizedupe: Find duplicates\n   - filelist:<list>: Search pipe-separated (|) file list\n   - filelistfilename:<filename>: Search files from list file\n   - frn:<frnlist>: Search by File Reference Numbers\n   - fsi:<index>: Search by file system index\n   - empty: Find empty folders\n4. Function Syntax:\n   - function:value: Equal to value\n   - function:<=value: Less than or equal\n   - function:<value: Less than\n   - function:=value: Equal to\n   - function:>value: Greater than\n   - function:>=value: Greater than or equal\n   - function:start..end: Range of values\n   - function:start-end: Range of values\n5. Modifiers:\n   - case:, nocase:: Enable/disable case sensitivity\n   - file:, folder:: Match only files or folders\n   - path:, nopath:: Match full path or filename only\n   - regex:, noregex:: Enable/disable regex\n   - wfn:, nowfn:: Match whole filename or anywhere\n   - wholeword:, ww:: Match whole words only\n   - wildcards:, nowildcards:: Enable/disable wildcards\nExamples:\n1. Find Python files modified today:\n   ext:py datemodified:today\n2. Find large video files:\n   ext:mp4|mkv|avi size:>1gb\n3. Find files in specific folder:\n   path:C:\\Projects *.js\n\n", "parameters": {"type": "object", "properties": {"base": {"description": "Base search parameters common to all platforms.", "properties": {"query": {"description": "Search query string. See platform-specific documentation for syntax details.", "title": "Query", "type": "string"}, "max_results": {"default": 100, "description": "Maximum number of results to return (1-1000)", "maximum": 1000, "minimum": 1, "title": "Max Results", "type": "integer"}}, "required": ["query"], "title": "BaseSearchQuery", "type": "object"}, "windows_params": {"$defs": {"WindowsSortOption": {"description": "Sort options for Windows Everything search.", "enum": [1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14], "title": "WindowsSortOption", "type": "integer"}}, "description": "Windows-specific search parameters for Everything SDK.", "properties": {"match_path": {"default": false, "description": "Match against full path instead of filename only", "title": "Match Path", "type": "boolean"}, "match_case": {"default": false, "description": "Enable case-sensitive search", "title": "Match Case", "type": "boolean"}, "match_whole_word": {"default": false, "description": "Match whole words only", "title": "Match Whole Word", "type": "boolean"}, "match_regex": {"default": false, "description": "Enable regex search", "title": "Match Regex", "type": "boolean"}, "sort_by": {"$ref": "#/$defs/WindowsSortOption", "default": 1, "description": "Sort order for results"}}, "title": "WindowsSpecificParams", "type": "object"}}, "required": ["base"]}}}
2025-04-20 17:36:56.977 | ERROR    | src.llm.openai:139 - 工具 1 参数: {"type": "object", "properties": {"base": {"description": "Base search parameters common to all platforms.", "properties": {"query": {"description": "Search query string. See platform-specific documentation for syntax details.", "title": "Query", "type": "string"}, "max_results": {"default": 100, "description": "Maximum number of results to return (1-1000)", "maximum": 1000, "minimum": 1, "title": "Max Results", "type": "integer"}}, "required": ["query"], "title": "BaseSearchQuery", "type": "object"}, "windows_params": {"$defs": {"WindowsSortOption": {"description": "Sort options for Windows Everything search.", "enum": [1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14], "title": "WindowsSortOption", "type": "integer"}}, "description": "Windows-specific search parameters for Everything SDK.", "properties": {"match_path": {"default": false, "description": "Match against full path instead of filename only", "title": "Match Path", "type": "boolean"}, "match_case": {"default": false, "description": "Enable case-sensitive search", "title": "Match Case", "type": "boolean"}, "match_whole_word": {"default": false, "description": "Match whole words only", "title": "Match Whole Word", "type": "boolean"}, "match_regex": {"default": false, "description": "Enable regex search", "title": "Match Regex", "type": "boolean"}, "sort_by": {"$ref": "#/$defs/WindowsSortOption", "default": 1, "description": "Sort order for results"}}, "title": "WindowsSpecificParams", "type": "object"}}, "required": ["base"]}
2025-04-20 17:36:56.977 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:40:54.561 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 17:40:54.561 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:40:54.561 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:40:56.567 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:40:56.567 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:41:01.443 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 17:41:01.444 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 17:41:01.444 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 17:41:01.968 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 17:41:01.968 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 17:41:01.968 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 17:41:01.969 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 17:41:01.969 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 17:41:04.690 | INFO     | src.clients.cli:48 - 用户输入: '查询QQ.exe'
2025-04-20 17:41:04.691 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查询QQ.exe'
2025-04-20 17:41:04.691 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:41:04.691 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:41:06.369 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:41:06.370 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:41:06.370 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:41:06.371 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:41:07.439 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 17:41:07.439 | INFO     | src.clients.mcp_client:195 - 切换到服务器: everything
2025-04-20 17:41:07.440 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 17:41:07.440 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 17:41:08.043 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 17:41:08.043 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 17:41:08.046 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 17:41:08.046 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:41:09.412 | INFO     | src.clients.mcp_client:254 - LLM 请求调用工具: ['search']
2025-04-20 17:41:09.413 | INFO     | src.clients.mcp_client:264 - 正在调用工具: search, 参数: {'base': {'max_results': 100, 'query': 'QQ.exe'}}
2025-04-20 17:41:09.457 | INFO     | src.clients.mcp_client:269 - 工具调用成功: search
2025-04-20 17:41:09.457 | INFO     | src.clients.mcp_client:293 - 正在获取 LLM 最终响应...
2025-04-20 17:41:18.560 | INFO     | src.clients.mcp_client:300 - 最终 LLM API 调用成功
2025-04-20 17:41:18.561 | INFO     | src.clients.mcp_client:308 - 查询处理完成，返回结果
2025-04-20 17:45:54.375 | INFO     | src.clients.cli:48 - 用户输入: '查找uv.exe'
2025-04-20 17:45:54.376 | INFO     | src.clients.mcp_client:144 - 正在处理查询: '查找uv.exe'
2025-04-20 17:45:54.376 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gemini-2.0-flash, API 端点: https://api.yuchu.me/v1
2025-04-20 17:45:54.376 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:45:57.679 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:45:57.680 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:45:57.680 | INFO     | src.clients.mcp_client:152 - 已初始化 LLM 提供者: gemini-2.0-flash
2025-04-20 17:45:57.680 | INFO     | src.clients.mcp_client:165 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:45:58.561 | INFO     | src.clients.mcp_client:182 - LLM 选择使用服务器: everything
2025-04-20 17:45:58.564 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 17:45:58.565 | INFO     | src.clients.mcp_client:236 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:45:58.887 | ERROR    | src.llm.openai:114 - OpenAI API 调用失败: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:45:58.888 | ERROR    | src.llm.openai:115 - 请求 URL: https://api.yuchu.me/v1/chat/completions
2025-04-20 17:45:58.889 | ERROR    | src.llm.openai:116 - 请求头: Headers({'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'python-httpx/0.28.1', 'authorization': '[secure]', 'content-type': 'application/json'})
2025-04-20 17:45:58.890 | ERROR    | src.llm.openai:122 - 错误响应原文: {"error":{"message":"Invalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[0].value.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"$defs\" at 'tools[0].function_declarations[0].parameters.properties[1].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[1].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[2].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[3].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"$ref\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[4].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[4].value': Cannot find field. (request id: 2025042017455982697370fm6Bxgo6)","type":"","param":"","code":400}}
2025-04-20 17:45:58.891 | ERROR    | src.llm.openai:125 - 错误详情: {
  "error": {
    "message": "Invalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[0].value.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"$defs\" at 'tools[0].function_declarations[0].parameters.properties[1].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[1].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[2].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[3].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"$ref\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[4].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value.properties[4].value': Cannot find field. (request id: 2025042017455982697370fm6Bxgo6)",
    "type": "",
    "param": "",
    "code": 400
  }
}
2025-04-20 17:45:58.891 | ERROR    | src.llm.openai:134 - 工具 1 定义: {"type": "function", "function": {"name": "search", "description": "Universal file search tool for Windows\n\nCurrent Implementation:\nUsing Everything SDK with full search capabilities\n\nSearch Syntax Guide:\nSearch for files and folders using Everything SDK.\n                \nFeatures:\n- Fast file and folder search across all indexed drives\n- Support for wildcards and boolean operators\n- Multiple sort options (name, path, size, dates)\n- Case-sensitive and whole word matching\n- Regular expression support\n- Path matching\nSearch Syntax Guide:\n1. Basic Operators:\n   - space: AND operator\n   - |: OR operator\n   - !: NOT operator\n   - < >: Grouping\n   - \" \": Search for an exact phrase\n2. Wildcards:\n   - *: Matches zero or more characters\n   - ?: Matches exactly one character\n   Note: Wildcards match the whole filename by default. Disable Match whole filename to match wildcards anywhere.\n3. Functions:\n   Size and Count:\n   - size:<size>[kb|mb|gb]: Search by file size\n   - count:<max>: Limit number of results\n   - childcount:<count>: Folders with specific numbe...", "parameters": {"type": "object", "properties": {"base": {"description": "Base search parameters common to all platforms.", "properties": {"query": {"description": "Search query string. See platform-specific documentation for syntax details.", "title": "Query", "type": "string"}, "max_results": {"default": 100, "description": "Maximum number of results to return (1-1000)", "maximum": 1000, "minimum": 1, "title": "Max Results", "type": "integer"}}, "required": ["query"], "title": "BaseSearchQuery", "type": "object"}, "windows_params": {"$defs": {"WindowsSortOption": {"description": "Sort options for Windows Everything search.", "enum": [1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14], "title": "WindowsSortOption", "type": "integer"}}, "description": "Windows-specific search parameters for Everything SDK.", "properties": {"match_path": {"default": false, "description": "Match against full path instead of filename only", "title": "Match Path", "type": "boolean"}, "match_case": {"default": false, "description": "Enable case-sensitive search", "title": "Match Case", "type": "boolean"}, "match_whole_word": {"default": false, "description": "Match whole words only", "title": "Match Whole Word", "type": "boolean"}, "match_regex": {"default": false, "description": "Enable regex search", "title": "Match Regex", "type": "boolean"}, "sort_by": {"$ref": "#/$defs/WindowsSortOption", "default": 1, "description": "Sort order for results"}}, "title": "WindowsSpecificParams", "type": "object"}}, "required": ["base"]}}}
2025-04-20 17:45:58.891 | ERROR    | src.llm.openai:139 - 工具 1 参数: {"type": "object", "properties": {"base": {"description": "Base search parameters common to all platforms.", "properties": {"query": {"description": "Search query string. See platform-specific documentation for syntax details.", "title": "Query", "type": "string"}, "max_results": {"default": 100, "description": "Maximum number of results to return (1-1000)", "maximum": 1000, "minimum": 1, "title": "Max Results", "type": "integer"}}, "required": ["query"], "title": "BaseSearchQuery", "type": "object"}, "windows_params": {"$defs": {"WindowsSortOption": {"description": "Sort options for Windows Everything search.", "enum": [1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14], "title": "WindowsSortOption", "type": "integer"}}, "description": "Windows-specific search parameters for Everything SDK.", "properties": {"match_path": {"default": false, "description": "Match against full path instead of filename only", "title": "Match Path", "type": "boolean"}, "match_case": {"default": false, "description": "Enable case-sensitive search", "title": "Match Case", "type": "boolean"}, "match_whole_word": {"default": false, "description": "Match whole words only", "title": "Match Whole Word", "type": "boolean"}, "match_regex": {"default": false, "description": "Enable regex search", "title": "Match Regex", "type": "boolean"}, "sort_by": {"$ref": "#/$defs/WindowsSortOption", "default": 1, "description": "Sort order for results"}}, "title": "WindowsSpecificParams", "type": "object"}}, "required": ["base"]}
2025-04-20 17:45:58.891 | ERROR    | src.clients.mcp_client:311 - 处理查询时出现未捕获的错误: Client error '400 Bad Request' for url 'https://api.yuchu.me/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
2025-04-20 17:50:44.789 | INFO     | src.clients.mcp_client:319 - 正在关闭服务器连接...
2025-04-20 17:50:44.789 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:50:44.790 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:50:46.805 | INFO     | src.clients.mcp_client:324 - 正在关闭 HTTP 客户端...
2025-04-20 17:50:46.805 | INFO     | src.clients.mcp_client:329 - 正在清理资源...
2025-04-20 17:50:52.247 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 17:50:52.248 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 17:50:52.248 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 17:50:52.779 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 17:50:52.780 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 17:50:52.780 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 17:50:52.780 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 17:50:52.780 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 17:51:05.257 | INFO     | src.clients.cli:48 - 用户输入: '查找uv.exe'
2025-04-20 17:51:05.258 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查找uv.exe'
2025-04-20 17:51:05.258 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:51:05.258 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:51:07.085 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:51:07.086 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:51:07.087 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:51:07.087 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:51:09.084 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: everything
2025-04-20 17:51:09.085 | INFO     | src.clients.mcp_client:264 - 切换到服务器: everything
2025-04-20 17:51:09.085 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 17:51:09.085 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 17:51:10.686 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 17:51:10.687 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 17:51:10.689 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 17:51:10.690 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 17:51:14.411 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['search']
2025-04-20 17:51:14.412 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'max_results': 100, 'query': 'uv.exe'}, 'windows_params': {}}
2025-04-20 17:51:14.450 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 17:51:14.451 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 17:51:17.755 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 17:51:17.756 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 17:52:17.824 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 17:52:17.825 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查询北京天气'
2025-04-20 17:52:17.825 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 17:52:17.825 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 17:52:19.334 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 17:52:19.335 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 17:52:19.336 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 17:52:19.336 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 17:52:20.616 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: 高德
2025-04-20 17:52:20.616 | INFO     | src.clients.mcp_client:264 - 切换到服务器: 高德
2025-04-20 17:52:20.616 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 '高德'
2025-04-20 17:52:20.616 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 17:52:21.836 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 17:52:21.837 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 17:52:21.837 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 17:52:22.656 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['maps_weather']
2025-04-20 17:52:22.656 | INFO     | src.clients.mcp_client:336 - 正在调用工具: maps_weather, 参数: {'city': '北京'}
2025-04-20 17:52:23.086 | INFO     | src.clients.mcp_client:341 - 工具调用成功: maps_weather
2025-04-20 17:52:23.087 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 17:52:24.394 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 17:52:24.394 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:16:58.941 | INFO     | src.clients.mcp_client:391 - 正在关闭服务器连接...
2025-04-20 18:16:58.942 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:16:58.942 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:17:00.959 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:17:00.959 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:17:16.508 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 18:17:16.509 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 18:17:16.509 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 18:17:17.042 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 18:17:17.042 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 18:17:17.042 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 18:17:17.042 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 18:17:17.042 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 18:17:29.649 | INFO     | src.clients.cli:48 - 用户输入: '打开记事本'
2025-04-20 18:17:29.649 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '打开记事本'
2025-04-20 18:17:29.649 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:17:29.649 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:17:31.164 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:17:31.165 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:17:31.165 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:17:31.166 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:17:32.166 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:17:32.167 | INFO     | src.clients.mcp_client:264 - 切换到服务器: system_tools
2025-04-20 18:17:32.167 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'system_tools'
2025-04-20 18:17:32.167 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\system_tools.py'
2025-04-20 18:17:32.711 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'system_tools'，可用工具：['execute_program', 'open_app', 'send_qq_message', 'list_running_processes', 'kill_process']
2025-04-20 18:17:32.713 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:17:33.484 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['open_app']
2025-04-20 18:17:33.485 | INFO     | src.clients.mcp_client:336 - 正在调用工具: open_app, 参数: {'app_name': 'notepad'}
2025-04-20 18:17:34.060 | INFO     | src.clients.mcp_client:341 - 工具调用成功: open_app
2025-04-20 18:17:34.060 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:17:34.800 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:17:34.801 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:19:12.217 | INFO     | src.clients.cli:48 - 用户输入: '打开QQ向3836751864发送“下午好”'
2025-04-20 18:19:12.217 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '打开QQ向3836751864发送“下午好”'
2025-04-20 18:19:12.217 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:19:12.217 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:19:13.812 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:19:13.812 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:19:13.812 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:19:13.812 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:19:14.948 | INFO     | src.clients.mcp_client:255 - 没有明确服务器选择，使用默认服务器: system_tools
2025-04-20 18:19:14.952 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:19:16.233 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['open_app', 'send_qq_message']
2025-04-20 18:19:16.233 | INFO     | src.clients.mcp_client:336 - 正在调用工具: open_app, 参数: {'app_name': 'qq'}
2025-04-20 18:19:16.743 | INFO     | src.clients.mcp_client:341 - 工具调用成功: open_app
2025-04-20 18:19:16.743 | INFO     | src.clients.mcp_client:336 - 正在调用工具: send_qq_message, 参数: {'qq_number': '3836751864', 'message': '下午好'}
2025-04-20 18:19:20.355 | INFO     | src.clients.mcp_client:341 - 工具调用成功: send_qq_message
2025-04-20 18:19:20.356 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:19:21.371 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:19:21.371 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:22:23.308 | INFO     | src.clients.cli:48 - 用户输入: '打开记事本写入一个helloworld'
2025-04-20 18:22:23.309 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '打开记事本写入一个helloworld'
2025-04-20 18:22:23.309 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:22:23.309 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:22:24.770 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:22:24.771 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:22:24.771 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:22:24.772 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:22:25.776 | INFO     | src.clients.mcp_client:255 - 没有明确服务器选择，使用默认服务器: system_tools
2025-04-20 18:22:25.780 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:22:27.073 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['open_app', 'execute_program']
2025-04-20 18:22:27.074 | INFO     | src.clients.mcp_client:336 - 正在调用工具: open_app, 参数: {'app_name': 'notepad'}
2025-04-20 18:22:27.614 | INFO     | src.clients.mcp_client:341 - 工具调用成功: open_app
2025-04-20 18:22:27.614 | INFO     | src.clients.mcp_client:336 - 正在调用工具: execute_program, 参数: {'program': 'notepad', 'arguments': 'helloworld'}
2025-04-20 18:22:28.134 | INFO     | src.clients.mcp_client:341 - 工具调用成功: execute_program
2025-04-20 18:22:28.135 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:22:29.299 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:22:29.299 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:23:24.765 | INFO     | src.clients.cli:48 - 用户输入: '新建一个helloworld.py并在里面写入程序'
2025-04-20 18:23:24.765 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '新建一个helloworld.py并在里面写入程序'
2025-04-20 18:23:24.765 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:23:24.766 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:23:27.210 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:23:27.211 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:23:27.211 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:23:27.212 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:23:44.781 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:23:44.787 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:24:22.533 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['execute_program']
2025-04-20 18:24:22.533 | INFO     | src.clients.mcp_client:336 - 正在调用工具: execute_program, 参数: {'program': 'python', 'arguments': '-c "with open(\'helloworld.py\', \'w\') as f: f.write(\'print(\\\'Hello, World!\\\')\')"'}
2025-04-20 18:24:23.041 | INFO     | src.clients.mcp_client:341 - 工具调用成功: execute_program
2025-04-20 18:24:23.042 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:24:23.738 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:24:23.739 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:31:10.967 | INFO     | src.clients.mcp_client:391 - 正在关闭服务器连接...
2025-04-20 18:31:10.967 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:31:10.967 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:31:10.974 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:31:10.974 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:31:31.155 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 18:31:31.156 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 18:31:31.157 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 18:31:31.691 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 18:31:31.692 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 18:31:31.692 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 18:31:31.692 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 18:31:31.692 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 18:32:06.572 | INFO     | src.clients.cli:48 - 用户输入: '查询北京天气'
2025-04-20 18:32:06.572 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查询北京天气'
2025-04-20 18:32:06.572 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:32:06.572 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:32:08.400 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:32:08.400 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:32:08.400 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:32:08.400 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:32:09.664 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: 高德
2025-04-20 18:32:09.664 | INFO     | src.clients.mcp_client:264 - 切换到服务器: 高德
2025-04-20 18:32:09.664 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 '高德'
2025-04-20 18:32:09.664 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 18:32:13.747 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 18:32:13.748 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 18:32:13.748 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 18:32:21.407 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['maps_weather']
2025-04-20 18:32:21.407 | INFO     | src.clients.mcp_client:336 - 正在调用工具: maps_weather, 参数: {'city': '北京'}
2025-04-20 18:32:26.519 | INFO     | src.clients.mcp_client:341 - 工具调用成功: maps_weather
2025-04-20 18:32:26.519 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:32:34.141 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:32:34.142 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:32:46.810 | INFO     | src.clients.cli:48 - 用户输入: '查找uv.exe'
2025-04-20 18:32:46.811 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查找uv.exe'
2025-04-20 18:32:46.811 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:32:46.811 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:32:50.338 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:32:50.338 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:32:50.339 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:32:50.339 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:32:51.315 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: everything
2025-04-20 18:32:51.315 | INFO     | src.clients.mcp_client:264 - 切换到服务器: everything
2025-04-20 18:32:51.317 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 18:32:51.317 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 18:32:55.033 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:32:55.033 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 18:32:55.036 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:32:55.036 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 18:33:10.795 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['search']
2025-04-20 18:33:10.795 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'max_results': 100, 'query': 'uv.exe'}, 'windows_params': {}}
2025-04-20 18:33:10.835 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 18:33:10.835 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:33:21.340 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:33:21.342 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:33:35.718 | INFO     | src.clients.cli:48 - 用户输入: '打开记事本'
2025-04-20 18:33:35.719 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '打开记事本'
2025-04-20 18:33:35.719 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:33:35.719 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:33:38.686 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:33:38.686 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:33:38.686 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:33:38.687 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:33:48.990 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:33:48.991 | INFO     | src.clients.mcp_client:264 - 切换到服务器: system_tools
2025-04-20 18:33:48.991 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'system_tools'
2025-04-20 18:33:48.991 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\system_tools.py'
2025-04-20 18:33:49.619 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'system_tools'，可用工具：['execute_program', 'open_app', 'send_qq_message', 'list_running_processes', 'kill_process', 'create_file', 'read_file', 'list_files', 'delete_file', 'get_working_directory', 'run_python_code']
2025-04-20 18:33:49.622 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:34:03.098 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['open_app']
2025-04-20 18:34:03.098 | INFO     | src.clients.mcp_client:336 - 正在调用工具: open_app, 参数: {'app_name': 'notepad'}
2025-04-20 18:34:03.655 | INFO     | src.clients.mcp_client:341 - 工具调用成功: open_app
2025-04-20 18:34:03.656 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:34:05.001 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:34:05.001 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:34:19.014 | INFO     | src.clients.cli:48 - 用户输入: '查看当前工作目录'
2025-04-20 18:34:19.015 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查看当前工作目录'
2025-04-20 18:34:19.015 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:34:19.015 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:34:29.192 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:34:29.192 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:34:29.193 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:34:29.193 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:34:35.118 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:34:35.122 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:34:45.059 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['get_working_directory']
2025-04-20 18:34:45.059 | INFO     | src.clients.mcp_client:336 - 正在调用工具: get_working_directory, 参数: {}
2025-04-20 18:34:45.062 | INFO     | src.clients.mcp_client:341 - 工具调用成功: get_working_directory
2025-04-20 18:34:45.063 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:34:49.065 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:34:49.065 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:35:01.158 | INFO     | src.clients.cli:48 - 用户输入: '创建一个helloworld.py文件，内容是print("Hello World!")'
2025-04-20 18:35:01.159 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '创建一个helloworld.py文件，内容是print("Hello World!")'
2025-04-20 18:35:01.159 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:35:01.159 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:35:10.502 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:35:10.502 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:35:32.454 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: everything
2025-04-20 18:35:32.455 | INFO     | src.clients.mcp_client:264 - 切换到服务器: everything
2025-04-20 18:35:32.455 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 18:35:32.455 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 18:35:33.120 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:35:33.120 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 18:35:33.122 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:35:33.122 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 18:35:34.760 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['search']
2025-04-20 18:35:34.760 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'query': 'helloworld.py', 'max_results': 1}}
2025-04-20 18:35:34.788 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 18:35:34.789 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:35:36.007 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:35:36.007 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:36:16.989 | INFO     | src.clients.cli:48 - 用户输入: '运行一段代码计算1到100的和'
2025-04-20 18:36:16.990 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '运行一段代码计算1到100的和'
2025-04-20 18:36:16.990 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:36:16.990 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:36:19.891 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:36:19.892 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:36:19.892 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:36:19.892 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:36:21.419 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:36:21.419 | INFO     | src.clients.mcp_client:264 - 切换到服务器: system_tools
2025-04-20 18:36:21.420 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'system_tools'
2025-04-20 18:36:21.420 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\system_tools.py'
2025-04-20 18:36:22.056 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'system_tools'，可用工具：['execute_program', 'open_app', 'send_qq_message', 'list_running_processes', 'kill_process', 'create_file', 'read_file', 'list_files', 'delete_file', 'get_working_directory', 'run_python_code']
2025-04-20 18:36:22.060 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:36:28.775 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['run_python_code']
2025-04-20 18:36:28.775 | INFO     | src.clients.mcp_client:336 - 正在调用工具: run_python_code, 参数: {'code': 'sum(range(1, 101))'}
2025-04-20 18:36:28.780 | INFO     | src.clients.mcp_client:341 - 工具调用成功: run_python_code
2025-04-20 18:36:28.780 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:36:39.246 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:36:39.246 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:52:38.847 | INFO     | src.clients.mcp_client:391 - 正在关闭服务器连接...
2025-04-20 18:52:38.847 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:52:38.847 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:52:42.883 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 18:52:42.883 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 18:53:26.418 | INFO     | src.clients.mcp_client:53 - 正在设置 API 密钥
2025-04-20 18:53:26.419 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 18:53:26.419 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 18:53:27.026 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 18:53:27.026 | INFO     | src.clients.cli:21 - MCP 客户端已启动！
2025-04-20 18:53:27.026 | INFO     | src.clients.cli:22 - 使用模型：gpt-4o-mini
2025-04-20 18:53:27.027 | INFO     | src.clients.cli:23 - API 端点：https://api.yuchu.me/v1
2025-04-20 18:53:27.027 | INFO     | src.clients.cli:24 - 当前服务器：weather
2025-04-20 18:53:53.129 | INFO     | src.clients.cli:48 - 用户输入: '查询北京未来三天天气预报'
2025-04-20 18:53:53.129 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查询北京未来三天天气预报'
2025-04-20 18:53:53.129 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:53:53.129 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:53:55.268 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:53:55.268 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:53:55.268 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:53:55.268 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:53:56.403 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: 高德
2025-04-20 18:53:56.403 | INFO     | src.clients.mcp_client:264 - 切换到服务器: 高德
2025-04-20 18:53:56.403 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 '高德'
2025-04-20 18:53:56.404 | INFO     | src.connectors.sse:23 - 正在连接到 SSE 服务器 'https://mcp.amap.com/sse?key=5366822e47889703d452e600b3ad5f05'
2025-04-20 18:53:57.517 | INFO     | src.connectors.sse:39 - 获取到高德工具列表，共 12 个工具
2025-04-20 18:53:57.518 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 '高德'，可用工具：['maps_direction_bicycling', 'maps_direction_driving', 'maps_direction_transit_integrated', 'maps_direction_walking', 'maps_distance', 'maps_geo', 'maps_regeocode', 'maps_ip_location', 'maps_around_search', 'maps_search_detail', 'maps_text_search', 'maps_weather']
2025-04-20 18:53:57.518 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 18:53:58.428 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['maps_weather']
2025-04-20 18:53:58.429 | INFO     | src.clients.mcp_client:336 - 正在调用工具: maps_weather, 参数: {'city': '北京'}
2025-04-20 18:53:58.656 | INFO     | src.clients.mcp_client:341 - 工具调用成功: maps_weather
2025-04-20 18:53:58.656 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:54:01.392 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:54:01.392 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:54:39.432 | INFO     | src.clients.cli:48 - 用户输入: '查询洛杉矶和纽约天气情况，取其中五项内容，用json数组返回'
2025-04-20 18:54:39.433 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查询洛杉矶和纽约天气情况，取其中五项内容，用json数组返回'
2025-04-20 18:54:39.433 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:54:39.433 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:54:41.037 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:54:41.037 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:54:41.038 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:54:41.038 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:54:42.080 | INFO     | src.clients.mcp_client:255 - 没有明确服务器选择，使用默认服务器: 高德
2025-04-20 18:54:42.080 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 '高德' 的工具
2025-04-20 18:54:43.273 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['maps_weather', 'maps_weather']
2025-04-20 18:54:43.273 | INFO     | src.clients.mcp_client:336 - 正在调用工具: maps_weather, 参数: {'city': '洛杉矶'}
2025-04-20 18:54:43.654 | INFO     | src.clients.mcp_client:341 - 工具调用成功: maps_weather
2025-04-20 18:54:43.655 | INFO     | src.clients.mcp_client:336 - 正在调用工具: maps_weather, 参数: {'city': '纽约'}
2025-04-20 18:54:43.787 | INFO     | src.clients.mcp_client:341 - 工具调用成功: maps_weather
2025-04-20 18:54:43.787 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:54:44.867 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:54:44.868 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:55:27.668 | INFO     | src.clients.cli:48 - 用户输入: '使用weather查询洛杉矶和纽约天气信息，取其中五项参数用json数组返回'
2025-04-20 18:55:27.669 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '使用weather查询洛杉矶和纽约天气信息，取其中五项参数用json数组返回'
2025-04-20 18:55:27.669 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:55:27.669 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:55:30.545 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:55:30.545 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:55:30.546 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:55:30.546 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:55:31.622 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: weather
2025-04-20 18:55:31.623 | INFO     | src.clients.mcp_client:264 - 切换到服务器: weather
2025-04-20 18:55:31.623 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'weather'
2025-04-20 18:55:31.623 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\weather.py'
2025-04-20 18:55:32.260 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'weather'，可用工具：['get_alerts', 'get_forecast']
2025-04-20 18:55:32.263 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'weather' 的工具
2025-04-20 18:55:41.142 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['get_forecast', 'get_forecast']
2025-04-20 18:55:41.142 | INFO     | src.clients.mcp_client:336 - 正在调用工具: get_forecast, 参数: {'latitude': 34.0522, 'longitude': -118.2437}
2025-04-20 18:55:48.264 | INFO     | src.clients.mcp_client:341 - 工具调用成功: get_forecast
2025-04-20 18:55:48.265 | INFO     | src.clients.mcp_client:336 - 正在调用工具: get_forecast, 参数: {'latitude': 40.7128, 'longitude': -74.006}
2025-04-20 18:55:51.909 | INFO     | src.clients.mcp_client:341 - 工具调用成功: get_forecast
2025-04-20 18:55:51.909 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:55:55.575 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:55:55.575 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:56:14.418 | INFO     | src.clients.cli:48 - 用户输入: '查找ffmpeg.exe'
2025-04-20 18:56:14.419 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查找ffmpeg.exe'
2025-04-20 18:56:14.419 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:56:14.419 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:56:18.778 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:56:18.778 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:56:18.779 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:56:18.779 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:56:24.590 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: everything
2025-04-20 18:56:24.591 | INFO     | src.clients.mcp_client:264 - 切换到服务器: everything
2025-04-20 18:56:24.591 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 18:56:24.591 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 18:56:38.555 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:56:38.556 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 18:56:38.558 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 18:56:38.558 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 18:56:45.510 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['search']
2025-04-20 18:56:45.510 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'max_results': 10, 'query': 'ffmpeg.exe'}, 'windows_params': {}}
2025-04-20 18:56:45.542 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 18:56:45.543 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:56:50.177 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:56:50.177 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:57:11.564 | INFO     | src.clients.cli:48 - 用户输入: '查看当前工作目录'
2025-04-20 18:57:11.564 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '查看当前工作目录'
2025-04-20 18:57:11.565 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:57:11.565 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:57:18.440 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:57:18.440 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:57:18.440 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:57:18.440 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:57:21.395 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:57:21.395 | INFO     | src.clients.mcp_client:264 - 切换到服务器: system_tools
2025-04-20 18:57:21.396 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'system_tools'
2025-04-20 18:57:21.397 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\system_tools.py'
2025-04-20 18:57:22.011 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'system_tools'，可用工具：['execute_program', 'open_app', 'send_qq_message', 'list_running_processes', 'kill_process', 'create_file', 'read_file', 'list_files', 'delete_file', 'get_working_directory', 'run_python_code']
2025-04-20 18:57:22.015 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:57:24.422 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['get_working_directory']
2025-04-20 18:57:24.422 | INFO     | src.clients.mcp_client:336 - 正在调用工具: get_working_directory, 参数: {}
2025-04-20 18:57:24.427 | INFO     | src.clients.mcp_client:341 - 工具调用成功: get_working_directory
2025-04-20 18:57:24.427 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:57:25.753 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:57:25.753 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:57:55.528 | INFO     | src.clients.cli:48 - 用户输入: '在当前工作目录下创建helloworld.py，写入"print("helloworld")"'
2025-04-20 18:57:55.528 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '在当前工作目录下创建helloworld.py，写入"print("helloworld")"'
2025-04-20 18:57:55.528 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:57:55.529 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:57:58.717 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:57:58.717 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:57:58.717 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:57:58.718 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:57:59.768 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:57:59.772 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:58:03.508 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['get_working_directory']
2025-04-20 18:58:03.508 | INFO     | src.clients.mcp_client:336 - 正在调用工具: get_working_directory, 参数: {}
2025-04-20 18:58:03.512 | INFO     | src.clients.mcp_client:341 - 工具调用成功: get_working_directory
2025-04-20 18:58:03.512 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:58:20.492 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:58:20.493 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 18:58:35.882 | INFO     | src.clients.cli:48 - 用户输入: '创建helloworld.py，写入"print("helloworld")"'
2025-04-20 18:58:35.883 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '创建helloworld.py，写入"print("helloworld")"'
2025-04-20 18:58:35.883 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 18:58:35.883 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 18:58:48.146 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 18:58:48.146 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 18:58:48.146 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 18:58:48.147 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 18:58:54.440 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 18:58:54.448 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 18:59:15.719 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['create_file']
2025-04-20 18:59:15.719 | INFO     | src.clients.mcp_client:336 - 正在调用工具: create_file, 参数: {'content': 'print("helloworld")', 'file_path': 'helloworld.py'}
2025-04-20 18:59:15.723 | INFO     | src.clients.mcp_client:341 - 工具调用成功: create_file
2025-04-20 18:59:15.724 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 18:59:17.158 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 18:59:17.160 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 19:00:54.175 | INFO     | src.clients.cli:48 - 用户输入: '使用记事本打开hellowrold.py'
2025-04-20 19:00:54.176 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '使用记事本打开hellowrold.py'
2025-04-20 19:00:54.176 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 19:00:54.176 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 19:00:58.733 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 19:00:58.734 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 19:00:58.734 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 19:00:58.734 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 19:01:00.705 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: everything
2025-04-20 19:01:00.705 | INFO     | src.clients.mcp_client:264 - 切换到服务器: everything
2025-04-20 19:01:00.706 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'everything'
2025-04-20 19:01:00.706 | INFO     | src.connectors.stdio:81 - 正在执行命令 'uvx' 参数: ['mcp-server-everything-search']
2025-04-20 19:01:01.399 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 19:01:01.399 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'everything'，可用工具：['search']
2025-04-20 19:01:01.403 | WARNING  | src.connectors.stdio:123 - 工具 'search' 描述过长 (3504 字符)，已截断至 1000 字符
2025-04-20 19:01:01.404 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'everything' 的工具
2025-04-20 19:01:07.338 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['search', 'search']
2025-04-20 19:01:07.339 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'max_results': 1, 'query': 'hellowrold.py'}, 'windows_params': {'match_case': False, 'match_path': False, 'match_regex': False, 'match_whole_word': False}}
2025-04-20 19:01:07.366 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 19:01:07.366 | INFO     | src.clients.mcp_client:336 - 正在调用工具: search, 参数: {'base': {'max_results': 1, 'query': '记事本'}, 'windows_params': {'match_case': False, 'match_path': False, 'match_regex': False, 'match_whole_word': False}}
2025-04-20 19:01:07.398 | INFO     | src.clients.mcp_client:341 - 工具调用成功: search
2025-04-20 19:01:07.398 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 19:01:11.519 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 19:01:11.520 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 19:01:44.508 | INFO     | src.clients.cli:48 - 用户输入: '运行一段代码计算1到100的和'
2025-04-20 19:01:44.508 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '运行一段代码计算1到100的和'
2025-04-20 19:01:44.508 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 19:01:44.508 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 19:01:46.327 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 19:01:46.328 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 19:01:46.328 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 19:01:46.328 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 19:01:47.278 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 19:01:47.278 | INFO     | src.clients.mcp_client:264 - 切换到服务器: system_tools
2025-04-20 19:01:47.278 | INFO     | src.clients.mcp_client:112 - 正在连接到服务器 'system_tools'
2025-04-20 19:01:47.279 | INFO     | src.connectors.stdio:60 - 正在启动本地脚本 'C:\Users\yuchu\my_codes\Python\mcp-demo\src\mcp-server\system_tools.py'
2025-04-20 19:01:47.896 | INFO     | src.clients.mcp_client:120 - 已连接到服务器 'system_tools'，可用工具：['execute_program', 'open_app', 'send_qq_message', 'list_running_processes', 'kill_process', 'create_file', 'read_file', 'list_files', 'delete_file', 'get_working_directory', 'run_python_code']
2025-04-20 19:01:47.900 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 19:01:48.922 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['run_python_code']
2025-04-20 19:01:48.922 | INFO     | src.clients.mcp_client:336 - 正在调用工具: run_python_code, 参数: {'code': 'sum(range(1, 101))'}
2025-04-20 19:01:48.926 | INFO     | src.clients.mcp_client:341 - 工具调用成功: run_python_code
2025-04-20 19:01:48.926 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 19:01:50.296 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 19:01:50.296 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 19:02:05.541 | INFO     | src.clients.cli:48 - 用户输入: '打开chrome浏览器'
2025-04-20 19:02:05.541 | INFO     | src.clients.mcp_client:213 - 正在处理查询: '打开chrome浏览器'
2025-04-20 19:02:05.541 | INFO     | src.clients.mcp_client:80 - 初始化 LLM 提供者: gpt-4o-mini, API 端点: https://api.yuchu.me/v1
2025-04-20 19:02:05.542 | INFO     | src.llm.factory:84 - 使用非官方端点 api.yuchu.me，默认以 OpenAI 兼容接口处理
2025-04-20 19:02:08.754 | INFO     | src.llm.openai:33 - API 端点返回的模型数量: 65
2025-04-20 19:02:08.754 | INFO     | src.llm.openai:39 - 检测到 Claude 模型，但使用 OpenAI 兼容接口
2025-04-20 19:02:08.755 | INFO     | src.clients.mcp_client:221 - 已初始化 LLM 提供者: gpt-4o-mini
2025-04-20 19:02:08.755 | INFO     | src.clients.mcp_client:234 - 进行第一次 LLM API 调用，决定使用哪个服务器
2025-04-20 19:02:10.629 | INFO     | src.clients.mcp_client:251 - LLM 选择使用服务器: system_tools
2025-04-20 19:02:10.634 | INFO     | src.clients.mcp_client:308 - 进行第二次 LLM API 调用，使用服务器 'system_tools' 的工具
2025-04-20 19:02:17.686 | INFO     | src.clients.mcp_client:326 - LLM 请求调用工具: ['open_app']
2025-04-20 19:02:17.686 | INFO     | src.clients.mcp_client:336 - 正在调用工具: open_app, 参数: {'app_name': 'chrome'}
2025-04-20 19:02:18.200 | INFO     | src.clients.mcp_client:341 - 工具调用成功: open_app
2025-04-20 19:02:18.204 | INFO     | src.clients.mcp_client:365 - 正在获取 LLM 最终响应...
2025-04-20 19:02:20.876 | INFO     | src.clients.mcp_client:372 - 最终 LLM API 调用成功
2025-04-20 19:02:20.876 | INFO     | src.clients.mcp_client:380 - 查询处理完成，返回结果
2025-04-20 19:23:23.067 | INFO     | src.clients.mcp_client:391 - 正在关闭服务器连接...
2025-04-20 19:23:23.067 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 19:23:23.068 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
2025-04-20 19:23:27.103 | INFO     | src.clients.mcp_client:396 - 正在关闭 HTTP 客户端...
2025-04-20 19:23:27.104 | INFO     | src.clients.mcp_client:401 - 正在清理资源...
